From 55d5802e3e0fced35aad283ffc54f9eb3ce242b0 Mon Sep 17 00:00:00 2001
From: Richard Hughes <richard@hughsie.com>
Date: Thu, 9 Sep 2010 09:08:42 +0100
Subject: [PATCH 1/3] Do not crash when we click on the run dialog entry

---
 src/gpk-helper-run.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/src/gpk-helper-run.c b/src/gpk-helper-run.c
index 39e4f33..6d9b4bf 100644
--- a/src/gpk-helper-run.c
+++ b/src/gpk-helper-run.c
@@ -169,7 +169,7 @@ gpk_helper_run_row_activated_cb (GtkTreeView *treeview, GtkTreePath *path,
 	GtkTreeModel *model;
 	GtkTreeIter iter;
 	gboolean ret;
-	gchar *exec;
+	gchar *exec = NULL;
 
 	/* get selection */
 	model = gtk_tree_view_get_model (treeview);
@@ -179,7 +179,6 @@ gpk_helper_run_row_activated_cb (GtkTreeView *treeview, GtkTreePath *path,
 		return;
 	}
 
-	g_free (exec);
 	gtk_tree_model_get (model, &iter, GPK_CHOOSER_COLUMN_EXEC, &exec, -1);
 	gpk_helper_run_path (helper, exec);
 	g_free (exec);
-- 
1.7.11.2

